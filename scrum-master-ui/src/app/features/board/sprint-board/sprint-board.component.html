<ng-container>
  <app-left-menu></app-left-menu>
  @if (boardState.taskStatuses) {
    <section class="body">  
      <div class="SprintsSection  "></div>
      <div class="board">
        @for (oneStatus of boardState.taskStatuses; track oneStatus) {
          <div class="OneColumn">
            <div class="columnHeader">
              {{`Task.${oneStatus.statusName}Status` | translate}}
              <app-add-btn tooltip='{{"Task.AddTask"| translate}}' (add)="boardState.AddTaskBtnClick(oneStatus.statusOrder)" [size]="20" class="AddBtnTask"></app-add-btn>
            </div>
            <div class="tasksColumn" 
              cdkDropList 
              [id]="boardState.listId(oneStatus.statusOrder)" 
              [cdkDropListConnectedTo]="boardState.connectedTo(oneStatus.statusOrder)" 
              [cdkDropListData]="boardState.getTasksByStatus(oneStatus.statusOrder)" 
              (cdkDropListDropped)="drop($event, oneStatus.statusOrder)"
            >
              @if(boardState.isLoading()){
                <div class="loader"></div>
              }@else{
                @for (task of boardState.getTasksByStatus(oneStatus.statusOrder); track task) {
                  <div class="OneTask" (click)="boardState.ShowDetails(task.id)" cdkDrag [cdkDragData]="task">
                    <span class="TaskNumberSpan">
                      {{task.taskNumber}}
                    </span>
                    <p>{{task.title}}</p>
                    <p style="flex-basis: 100%;">{{'Task.AssignedUser'| translate}} {{ task.assignedUserFullName.trim() ? task.assignedUserFullName : ('Task.Unassigned' | translate) }}</p>
                  </div>
                }
              }
            </div>
          </div>
        }
      </div>
    </section>
  } @else {
    <div class="loader"><div></div></div>
  }
</ng-container>
<app-add-task [isOpen]="boardState.openModal()" (closed)="boardState.openModal.set(false)" [status]="boardState.addStatus" (submitted)="boardState.AddTask($event)" animate.enter="slideDownEnter" animate.leave="slideDownLeave"></app-add-task>
<app-task-details [taskId]="boardState.taskDetailsId" (closeEvent)="boardState.showDetailsModal.set(false)" [isOpen]="boardState.showDetailsModal()" (deleteEvent)="boardState.DeleteTask()"></app-task-details>
@if(boardState.errorModel.show)
{
  <app-custom-alert [errorModel]="boardState.errorModel" (closeEvent)="boardState.errorModel.hide()"></app-custom-alert>
}